<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Jerry's D3</title>
      <style>
      path {
        fill: none;
        stroke: blue;
        stroke-width: 1px;
      }
	  circle {
	    fill: blue;
	  }
    </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.10.0/d3.min.js"></script>
  <script src="file:///C:/Users/Jerry/Desktop/MCAP/docs/www/js/app/showTable.js"></script>
</head>
<body id="body">
<svg width="250" height="150"></svg>

<script>
//get the data
var myFilter = [["Freq", "InsertionLoss"],
				[40, 20],
				[80, 22],
				[120, 80],
				[160, 100],
				[200, 120]];

showTable(myFilter);				
//turn data to csv
var csvCreate = function csvCreate(myFilter) {
	var row = 1, col = 0, csv = "";
	
	csv = myFilter[0][0] + "," + myFilter[0][1] + "\n";
	for (row = 1; row < myFilter.length; row++) {
		csv += myFilter[row][col].toString() + "," + myFilter[row][col+1] + "\n";
		}
		col++;
	return csv;
}
var myCSV = csvCreate(myFilter);
		
//turn csv data into d3 data
var data = d3.csvParse(myCSV);

//mutate data from string to float		
data.forEach(function (d){string2Float(d);});
		
function string2Float(d){
	d.Freq = +d.Freq;
	d.InsertionLoss = +d.InsertionLoss;
	return d;
}

//create the canvas
var canvas = d3.select("svg");

//create the circles and bind the data to them
var circle = canvas.selectAll("circle").data(data);

//render the circles
circle.enter().append("circle")
    .attr("cx", function(data) {return data.Freq;} )
	.attr("cy", function(data) {return data.InsertionLoss;} )
    .attr("r", 3);

//create a path element
var path = canvas.append("path");

//create the line attribute for the path
var line = d3.line(data)
	.x(function(data) {return data.Freq;})
	.y(function(data) {return data.InsertionLoss;})
	.curve(d3.curveCatmullRom.alpha(1));

//draw the path
path.attr("d", line(data));
		  
</script>

	
</body>
</html>

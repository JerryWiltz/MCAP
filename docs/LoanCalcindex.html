<!DOCTYPE html>
<html>
<head>
<title>JavaScript Loan Calculator</title>
<style> /* This is a CSS style sheet: it adds style to the program output */
.output { font-weight: bold; }            /* Calculated values in bold */
#payment { text-decoration: underline; }  /* For element with id="payment" */
#graph { border: solid black 1px; }       /* Chart has a simple border */
th, td { vertical-align: top; }           /* Don't center table cells */
</style>
</head>
<body>
<!--
  This is an HTML table with <input> elements that allow the user to enter data and <span> elements in the program can display its results. These elements have ids like "interest" and "years". These ids are used in the JavaScript code that follows the table. Note that some of the input elements define "onchange" or "onclick" event handlers. These specify strings of JavaScript code to be executed when the user enters the data or clicks.
-->
<table>
  <tr><th>Enter Loan Data</th>
    <td></td>
    <th>Loan Balance, Cumulative Equity, and Interest Payments</th></tr>
  <tr><td>Amount of the Loan ($):</td>
    <td><input id="amount" onchange="calculate();"></td>
    <td rowspan=8>
      <canvas id="graph" width="500" height="250">Put this in a canvas</canvas></td></tr>
  <tr><td>Annual Interest (%):</td>
      <td><input id="apr" onchange="calculate();"></td>
  <tr><td>Repayment Period (years):</td>
      <td><input id="years" onchange="calculate();"></td>
  <tr><td>Zip Code (to find lenders):</td>
      <td><input id="zipcode" onchange="calculate();"></td>
  <tr><td>Approximate Payments:</td>
      <td><button onclick="calculate();">Calculate</button></td></tr>
  <tr><td>Monthly Payment:</td>
      <td>$<span class="output" id="payment"></span></td></tr>
  <tr><td>Total Payment:</td>
      <td>$<span class="output" id="total"></span></td></tr>
  <tr><td>Total Interest:</td>
      <td>$<span class="output" id="totalinterest"></span></td></tr>
  <tr><th>Sponsors:</th><td colspan=2>
      Apply for your loan with one of these fine lenders:
      <div id="lenders"></div></td></tr>
</table>

<!-- The rest of this example is JavaScript code in the <script> tag below -->
<!-- Normally, this script would go in the document <head> but it -->
<!-- is easier to understand here, after you have seen its HTML content -->
<script>
"use strict"; // Use EMACScript 5 strict mode in browsers that support it

/*
* This script defines the calculate() function called by the event handelers
* in the HTML above. The function reads values from the <input> elements, calculates
* loan payment information, displays the results in <span> elements. It also
* saves the user's data, displays links to lenders, and draws a chart.
*/

function calculate() {
  // Look up the input elements and output elements in the document
  var amount = document.getElementById("amount");
  var apr = document.getElementById("apr");
  var years = document.getElementById("years");
  var zipcode = document.getElementById("zipcode");
  var payment = document.getElementById("payment");
  var total = document.getElementById("total");
  var totalinterest = document.getElementById("totalinterest");
  
  // Get the users input from the input elements. Assume all is valid
  // Convert interest from a percentage to a decimal, and convert from
  // an annual rate to a monthly rate. Convert payment period in years
  // to the number of monthly payments.
  var principal = parseFloat(amount.value);
  var interest = parseFloat(apr.value) / 100 / 12;
  var payments = parseFloat(years.value) * 12;
  
  // Now compute the monthly payment figure.
  var x = Math.pow(1 + interest, payments);
  var monthly = (principal * x * interest)/(x-1);
  
    //Fill in the output fields, rounding to 2 decimal places
    payment.innerHTML = monthly.toFixed(2);
    total.innerHTML = (monthly * payments).toFixed(2);
    totalinterest.innerHTML = ((monthly * payments) - principal).toFixed(2);
    
    // Save the user's input so we can restore it the next time they visit
    save(amount.value, apr.value, years.value, zipcode.value);
} // end function calculate(_)

// Save the use's input as properties of the local storage object. Those
// properties will still be there when the users visits in the future
// This storage feature will not work in some browsers (firefox, e.g.) if you
// run the example from a local file:// URL. It does work over HTTP, however.
function save(amount, apr, years, zipcode) {
  if(window.localStorage) { //Only do this if the browser supports it.
    localStorage.loan_amount = amount;
    localStorage.loan_apr = apr;
    localStorage.loan_years = years;
    localStorage.loan_zipcode = zipcode;
    
  console.log(localStorage.loan_zipcode);
  }
}  // end function save()

// Automatically attempt to restore the input fields when the document first loads.
window.onload = function () {
  // If the browser supports localStorage and we have some input stored data
  if(window.localStorage && localStorage.loan_amount) {
  document.getElementById("amount").value = localStorage.loan_amount;
  document.getElementById("apr").value = localStorage.loan_apr;
  document.getElementById("years").value = localStorage.loan_years;
  document.getElementById("zipcode").value = localStorage.loan_zipcode;
  
  }
}
  
  
  
  
  
</script>  
</body>
</html>

































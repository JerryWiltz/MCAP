<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>JS Bin</title>

		<!-- Create a simple CodeMirror instance -->
		<link rel="stylesheet" href="./codemirror.css">
		<script src="./codemirror.js"></script>
		<script src="./javascript/javascript.js"></script>
		<style>.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>

		<!-- Add nPort -->
		<script src="../../dist/nP.js"></script>
		<link rel="stylesheet" href="repl.css">
	</head>
	<body>
		<article> 
			<input class='runButton' type="button" value="Run" onclick="doIt();" />
			<div>	<textarea id='code' name="code" >
			var V = 1;
var RSource = RLoad = 50;
var R1 = R3 = 292.4
var R2 = 17.6;

var Rp1 = 1/((1/R3) + (1/RLoad));
var Rs1 = R2 + Rp1;
var Rp2 = 1/((1/R1) + (1/Rs1)); 
var V1 = V * (Rp2/(RSource + Rp2));
var V2 = V1 * (Rp1/(R2 + Rp1));
var Attenuation = 20 * Math.log10(V2/V1);

var VRSource = V - V1;
var I1 = VRSource/RSource;
var I2 = - V2/RLoad;

var a1 = (V1 + I1 * 50)/(2 * Math.sqrt(50));
var b2 = (V2 - I2 * 50)/(2 * Math.sqrt(50));
var s21 = b2/a1;
var s21dB = 20 * Math.log10(s21);

nP.log('Attenuation, in dB, solved by voltage divider method');
nP.log(Attenuation);

nP.log('--------');

nP.log('Attenuation, in dB, solved by s-parameter method');
nP.log(s21dB);
	</textarea></div>
		</article>

		<script>

// get the screen width
var size = {
	width: window.innerWidth || document.body.clientWidth,
	height: window.innerHeight || document.body.clientHeight
}

myTextarea = document.getElementById('code');


var editor = CodeMirror.fromTextArea(myTextarea, {
	lineNumbers: true
});

myTextarea.innerHTML = editor.getValue();

function doIt() {
	var headID = document.getElementsByTagName("head")[0];
	var newScript = document.createElement("script");
	newScript.setAttribute('id', 'circuit');
	newScript.type = "text/javascript";
	//newScript.innerHTML = document.getElementById("textarea").value;
	newScript.innerHTML = editor.getValue();
	headID.appendChild(newScript);
}
		</script>

	</body>
</html>
